<html>
    <head>
        <meta charset="utf-8">
        
            <script src="lib/bindings/utils.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: calc(100% - 360px);
                 height: 750px;
                 background-color: #1a1a2e;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body><div style="position:fixed;top:14px;left:14px;z-index:999;background:#1a1a2e;border:1px solid #444;padding:12px 16px;border-radius:8px;"><button id="next-btn" onclick="nextTurn()" style="background:#fdbb2d;color:#1a1a2e;border:none;padding:8px 18px;font-size:14px;font-weight:bold;border-radius:5px;cursor:pointer;">Reveal Depth 0 ▶</button><div id="turn-display" style="margin-top:8px;color:#ccc;font-size:13px;">Click to start</div><div style="margin-top:10px;font-size:11px;color:#888;"><span style="color:#fdbb2d;">■</span> Seeds &nbsp;<span style="color:#e74c3c;">■</span> Wave 1 &nbsp;<span style="color:#2ecc71;">■</span> Wave 2 &nbsp;<span style="color:#3498db;">■</span> Wave 3</div></div><div style="position:fixed;top:0;right:0;width:350px;height:100vh;background:#0f0f1e;border-left:1px solid #333;z-index:1000;display:flex;flex-direction:column;font-family:sans-serif;"><div style="padding:14px 16px;border-bottom:1px solid #333;flex-shrink:0;"><div style="color:#ccc;font-size:11px;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;">Agent Response</div><div id="panel-placeholder" style="color:#555;font-size:13px;padding:20px 0;">Hover a node to read its response</div><div id="panel-body" style="display:none;"><div id="panel-name" style="color:#fff;font-size:15px;font-weight:bold;margin-bottom:6px;"></div><div id="panel-meta" style="font-size:12px;color:#aaa;"></div></div></div><div id="panel-text" style="flex:1;overflow-y:auto;padding:16px;color:#ddd;font-size:13px;line-height:1.7;white-space:pre-wrap;word-break:break-word;"></div></div><script>
    var nodesByDepth = {"0": ["TX-011"]};
    var edgesByDepth = {"99": [["TX-001", "TX-002"], ["TX-001", "TX-004"], ["TX-001", "TX-006"], ["TX-001", "TX-007"], ["TX-002", "TX-003"], ["TX-002", "TX-005"], ["TX-002", "TX-007"], ["TX-002", "TX-008"], ["TX-003", "TX-004"], ["TX-003", "TX-009"], ["TX-004", "TX-007"], ["TX-004", "TX-010"], ["TX-005", "TX-006"], ["TX-005", "TX-011"], ["TX-006", "TX-012"], ["TX-007", "TX-008"], ["TX-007", "TX-011"], ["TX-008", "TX-009"], ["TX-008", "TX-012"], ["TX-009", "TX-010"], ["TX-010", "TX-011"], ["TX-010", "TX-012"], ["TX-011", "TX-012"]]};
    var panelContent = {"TX-001": {"name": "Ana Garcia", "occupation": "Small business owner (local restaurant)", "depth": 99, "text": ""}, "TX-002": {"name": "James Martinez", "occupation": "Software engineer at tech startup", "depth": 99, "text": ""}, "TX-003": {"name": "Sarah Johnson", "occupation": "Marketing manager", "depth": 99, "text": ""}, "TX-004": {"name": "Michael Brown", "occupation": "Rural farmer", "depth": 99, "text": ""}, "TX-005": {"name": "Emma Davis", "occupation": "Computer science major and part-time barista", "depth": 99, "text": ""}, "TX-006": {"name": "Diego Rodriguez", "occupation": "Unionized construction worker", "depth": 99, "text": ""}, "TX-007": {"name": "Olivia Wilson", "occupation": "Real estate investor and philanthropist", "depth": 99, "text": ""}, "TX-008": {"name": "Christopher Lee", "occupation": "Tech startup founder", "depth": 99, "text": ""}, "TX-009": {"name": "Emily Clark", "occupation": "Corporate attorney", "depth": 99, "text": ""}, "TX-010": {"name": "David Green", "occupation": "Rural veterinarian", "depth": 99, "text": ""}, "TX-011": {"name": "Isabella Martinez", "occupation": "Environmental science major and part-time waitress", "depth": 0, "text": "[TX-011 unavailable: Expecting value: line 1 column 1 (char 0)]"}, "TX-012": {"name": "Andrew White", "occupation": "Unionized manufacturing worker", "depth": 99, "text": ""}};
    var currentDepth = -1;
    var maxDepth = 0;

    var depthLabels = ["Seeds", "Wave 1", "Wave 2", "Wave 3"];
    var depthColors = {"0":"#fdbb2d","1":"#e74c3c","2":"#2ecc71","3":"#3498db"};

    function showPanel(nodeId) {
        var info = panelContent[nodeId];
        if (!info) return;
        var depth = String(info.depth);
        var color = depthColors[depth] || "#888";
        var badge = depthLabels[info.depth] || ("Wave " + info.depth);
        document.getElementById('panel-name').innerText = info.name;
        document.getElementById('panel-meta').innerHTML =
            '<span style="background:' + color + ';color:#1a1a2e;padding:2px 8px;border-radius:10px;font-size:11px;font-weight:bold;">'
            + badge + '</span>&nbsp;&nbsp;' + info.occupation;
        document.getElementById('panel-text').innerText = info.text;
        document.getElementById('panel-placeholder').style.display = 'none';
        document.getElementById('panel-body').style.display = 'block';
    }

    function clearPanel() {
        document.getElementById('panel-placeholder').style.display = 'block';
        document.getElementById('panel-body').style.display = 'none';
    }

    // Wire up hover events after vis.js network is ready
    window.addEventListener('load', function() {
        network.setOptions({ interaction: { hover: true } });
        network.on('hoverNode', function(e) { showPanel(e.node); });
        network.on('blurNode', function() { clearPanel(); });
    });

    function nextTurn() {
        currentDepth++;
        if (currentDepth > maxDepth) {
            document.getElementById('turn-display').innerText = "All nodes revealed!";
            return;
        }

        var nodesDS = network.body.data.nodes;
        var edgesDS = network.body.data.edges;

        // Reveal nodes at this depth
        var toReveal = nodesByDepth[currentDepth] || [];
        toReveal.forEach(function(id) {
            nodesDS.update({id: id, hidden: false});
        });

        // Reveal edges where both endpoints are now visible
        var edgesToReveal = edgesByDepth[String(currentDepth)] || [];
        edgesToReveal.forEach(function(pair) {
            var fromNode = nodesDS.get(pair[0]);
            var toNode = nodesDS.get(pair[1]);
            if (fromNode && toNode && !fromNode.hidden && !toNode.hidden) {
                network.body.data.edges.get().forEach(function(e) {
                    if ((e.from === pair[0] && e.to === pair[1]) ||
                        (e.from === pair[1] && e.to === pair[0])) {
                        edgesDS.update({id: e.id, hidden: false});
                    }
                });
            }
        });

        var label = currentDepth === 0
            ? "Depth 0 — Seed agents"
            : "Depth " + currentDepth + " — Wave " + currentDepth;
        document.getElementById('turn-display').innerText = label;
        document.getElementById('next-btn').innerText =
            currentDepth >= maxDepth ? "Done" : "Next Wave ▶";
    }
    </script>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-001", "label": "TX-001\nAna", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-002", "label": "TX-002\nJames", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-003", "label": "TX-003\nSarah", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-004", "label": "TX-004\nMichael", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-005", "label": "TX-005\nEmma", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-006", "label": "TX-006\nDiego", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-007", "label": "TX-007\nOlivia", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-008", "label": "TX-008\nChristopher", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-009", "label": "TX-009\nEmily", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-010", "label": "TX-010\nDavid", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}, {"color": "#fdbb2d", "font": {"color": "white"}, "hidden": true, "id": "TX-011", "label": "TX-011\nIsabella", "shape": "dot", "size": 30, "title": "", "x": 0, "y": 0}, {"color": "#888888", "font": {"color": "white"}, "hidden": true, "id": "TX-012", "label": "TX-012\nAndrew", "shape": "dot", "size": 22, "title": "", "x": 0, "y": 0}]);
                  edges = new vis.DataSet([{"color": "#444466", "from": "TX-001", "hidden": true, "to": "TX-002"}, {"color": "#444466", "from": "TX-001", "hidden": true, "to": "TX-004"}, {"color": "#444466", "from": "TX-001", "hidden": true, "to": "TX-006"}, {"color": "#444466", "from": "TX-001", "hidden": true, "to": "TX-007"}, {"color": "#444466", "from": "TX-002", "hidden": true, "to": "TX-003"}, {"color": "#444466", "from": "TX-002", "hidden": true, "to": "TX-005"}, {"color": "#444466", "from": "TX-002", "hidden": true, "to": "TX-007"}, {"color": "#444466", "from": "TX-002", "hidden": true, "to": "TX-008"}, {"color": "#444466", "from": "TX-003", "hidden": true, "to": "TX-004"}, {"color": "#444466", "from": "TX-003", "hidden": true, "to": "TX-009"}, {"color": "#444466", "from": "TX-004", "hidden": true, "to": "TX-007"}, {"color": "#444466", "from": "TX-004", "hidden": true, "to": "TX-010"}, {"color": "#444466", "from": "TX-005", "hidden": true, "to": "TX-006"}, {"color": "#444466", "from": "TX-005", "hidden": true, "to": "TX-011"}, {"color": "#444466", "from": "TX-006", "hidden": true, "to": "TX-012"}, {"color": "#444466", "from": "TX-007", "hidden": true, "to": "TX-008"}, {"color": "#444466", "from": "TX-007", "hidden": true, "to": "TX-011"}, {"color": "#444466", "from": "TX-008", "hidden": true, "to": "TX-009"}, {"color": "#444466", "from": "TX-008", "hidden": true, "to": "TX-012"}, {"color": "#444466", "from": "TX-009", "hidden": true, "to": "TX-010"}, {"color": "#444466", "from": "TX-010", "hidden": true, "to": "TX-011"}, {"color": "#444466", "from": "TX-010", "hidden": true, "to": "TX-012"}, {"color": "#444466", "from": "TX-011", "hidden": true, "to": "TX-012"}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {
    "configure": {
        "enabled": false
    },
    "edges": {
        "color": {
            "inherit": true
        },
        "smooth": {
            "enabled": true,
            "type": "dynamic"
        }
    },
    "interaction": {
        "dragNodes": true,
        "hideEdgesOnDrag": false,
        "hideNodesOnDrag": false
    },
    "physics": {
        "enabled": true,
        "forceAtlas2Based": {
            "avoidOverlap": 0,
            "centralGravity": 0.01,
            "damping": 0.4,
            "gravitationalConstant": -50,
            "springConstant": 0.08,
            "springLength": 100
        },
        "solver": "forceAtlas2Based",
        "stabilization": {
            "enabled": true,
            "fit": true,
            "iterations": 1000,
            "onlyDynamicEdges": false,
            "updateInterval": 50
        }
    }
};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    </body>
</html>